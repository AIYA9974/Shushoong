<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
<meta charset="UTF-8">
<title>항공 목록 조회</title>
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<link th:href="@{/css/basic/reset.css}" rel="stylesheet" />
<link th:href="@{/css/basic/layout.css}" rel="stylesheet" />
<link th:href="@{/css/basic/footer.css}" rel="stylesheet" />
<link th:href="@{/css/basic/header.css}" rel="stylesheet" />

<!-- <link th:href="@{/css/airline/reset.css}" rel="stylesheet" /> -->
<link th:href="@{/css/airline/core.css}" rel="stylesheet" />
<link th:href="@{/css/airline/airline_list.css}" rel="stylesheet" />
<link th:href="@{/css/basic/core.css}" rel="stylesheet" />
</head>
<body>
	<div class="wrapper">
		<div class="wrap-header">
			<header>
				<div th:replace="~{common/header :: Header}"></div>
				<div class="hrline">
					<hr>
				</div>
			</header>
		</div>
		<!-- 
		<div class="wrap-body">
			<div class="wrap-">
			 -->
		<div class="wrap-main">
			<div class="top-nav">top-nav</div>
			<div class="container">
				<div class="flex-container">
					<div class="sidebar">
						<div class="time-list">
							<form class="time-frm">
								<div>
									<p>시간대</p>
								</div>
								<!-- 출발 -->
								<div class="middle-range depart">
									<div>출발</div>
									<div class="multi-range-slider">
										<!-- 진짜 슬라이더 -->
										<input type="range" id="depart-input-left" min="0" max="22" value="0" /> 
										<input type="range" id="depart-input-right" min="2" max="24" value="24" />

										<!-- 커스텀 슬라이더 -->
										<div class="slider depart">
											<div class="track"></div>
											<div class="range"></div>
											<div class="thumb left depart"></div>
											<div class="thumb right depart"></div>
										</div>
										<div class="resultval time">
											<div class="div1"></div>
											<div class="div2"></div>
										</div>
									</div>
								</div>
								<!-- 도착 -->
								<div class="middle-range arr">
									<div>도착</div>
									<div class="multi-range-slider">
										<!-- 진짜 슬라이더 -->
										<input type="range" id="arr-input-left" min="0" max="22" value="0" /> 
										<input type="range" id="arr-input-right" min="2" max="24" value="24" />

										<!-- 커스텀 슬라이더 -->
										<div class="slider arr">
											<div class="track"></div>
											<div class="range"></div>
											<div class="thumb left arr"></div>
											<div class="thumb right arr"></div>
										</div>
										<div class="resultval time">
											<div class="div1"></div>
											<div class="div2"></div>
										</div>
									</div>
								</div>
							</form>
						</div>
						<div class="price-list">
							<form class="price-frm">
								<div>
									<p>가격</p>
								</div>
								<div class="middle-range price">
									<div class="multi-range-slider">
										<!-- 진짜 슬라이더 -->
										<input type="range" id="price-input-left" min="0" max="22" value="0" /> 
										<input type="range" id="price-input-right" min="2" max="24" value="24" />

										<!-- 커스텀 슬라이더 -->
										<div class="slider price">
											<div class="track"></div>
											<div class="range"></div>
											<div class="thumb left price"></div>
											<div class="thumb right price"></div>
										</div>
										<div class="resultval time">
											<div class="div1"></div>
											<div class="div2"></div>
										</div>
									</div>
								</div>

							</form>
						</div>
						<div class="layover-list">
							<form class="layover-frm">
								<div>
									<p>직항/경유</p>
								</div>
								<div class="layover-select">
									<label>
										<button type="button" class="direct-btn zero" id="direct-btn" >
											<img alt="" th:src="@{/images/bluecheck.png}" id="blue">
										</button>
											<span>직항</span>
									</label> 
									<label>
										<button type="button" class="direct-btn one" id="layover-btn">
											<img alt="" th:src="@{/images/skycheck.png}" id="sky">
										</button>
											<span>경유</span>
									</label>
								</div>
							</form>

						</div>
					</div>
					<div class="airline-list">

						<div class="select-bar">
							<form action="#">
								<select name="selectlist" id="showlist">
									<option value="price-cheap">가격 낮은 순</option>
									<option value="price-expensive">가격 높은 순</option>
									<option value="flytime-low">비행 짧은 순</option>
									<option value="flytime-long">비행 긴 순</option>
								</select>
							</form>
						</div>

						<div class="airline-info">
							<div class="seat-count">

								<div class="airline-flex">
									<div class="airline-logo">
										<div class="span-seat-div">
											<span class="span-seat">잔여 9석</span>
										</div>
										<img th:src="@{/images/airline_logo.png}" alt="">

									</div>
									<div class="airline-name">
										<span>티웨이 항공</span>
									</div>
									<div class="airinfo depart-info">
										<div class="info date">출발 일자</div>
										<div class="info time">이륙 시간</div>
										<div class="info loc">출발 지역</div>
									</div>
									<div class="arrow">
										<div class="via-count">
											<span>직항</span>
										</div>
										<img th:src="@{/images/airline_via.png}" alt="">
										<div class="flytime">비행 시간</div>
									</div>
									<div class="airinfo arr-info">
										<div class="info date">도착 일자</div>
										<div class="info time">착륙 시간</div>
										<div class="info loc">도착 지역</div>
									</div>

									<div class="nop">
										<div class="sero">
											<img th:src="@{/images/airline_line.png}" alt="">
										</div>
										<div class="ticket-adult">성인 1</div>

										<div class="airticket">
											<div class="ticket-price">
												<div>9999,999원</div>
											</div>
											<div class="ticket-btn">
												<button type="button">선택하기</button>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<!-- <div class="airline-info"></div>
                        <div class="airline-info"></div> -->
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- 		
		</div>
	</div>
	 -->
	<div class="wrap-footer">
		<div th:replace="~{common/footer :: Footer}"></div>
	</div>

	<!-- --------------------JS-------------------- -->
	<script type="text/javascript">
	
	$(document).ready(function(){
	    setDepartInitialValues(); // 시간대 출발
	    setArrInitialValues(); // 시간대 도착 
	    setPriceInitialValues(); // 가격대
	    btnClickHandler(); // 직항/경유
	});
	
	// 사이드 바
	
	// 시간대---------------------------
	// 출발 
	const inputDepartLeft = document.getElementById("depart-input-left");
	const inputDepartRight = document.getElementById("depart-input-right");
	const thumbDepartLeft = document.querySelector(".slider.depart > .thumb.left.depart");
	const thumbDepartRight = document.querySelector(".slider.depart > .thumb.right.depart");
	const departRange = document.querySelector(".slider.depart > .range");

	// 왼쪽 입력 값이 변경될 때 실행되는 함수
	const setDepartLeftValue = () => {
	    // 현재 입력 값(_this)과 입력 요소의 최소값과 최대값을 가져옴
	    const _this = inputDepartLeft;
	    const [min, max] = [parseInt(_this.min), parseInt(_this.max)];

	    // 입력 값이 최소값과 최대값 사이에 있는지 확인하고, 그렇지 않으면 값을 조정
	    _this.value = Math.min(parseInt(_this.value), parseInt(inputDepartRight.value) - 3);

	    // 왼쪽 thumb의 위치를 계산하여 슬라이더의 왼쪽 값을 표시
	    const leftValue = parseInt(_this.value);
	    
	    const leftVal = document.querySelector(".middle-range.depart .div1");
	    leftVal.innerHTML = `${leftValue}:00`;
	    
	    const percent = ((_this.value - min) / (max - min)) * 100;
	    thumbDepartLeft.style.left = percent + "%";
	    departRange.style.left = percent + "%";
	};

	// 오른쪽 입력 값이 변경될 때 실행되는 함수
	const setDepartRightValue = () => {
	    // 현재 입력 값(_this)과 입력 요소의 최소값과 최대값을 가져옴
	    const _this = inputDepartRight;
	    const [min, max] = [parseInt(_this.min), parseInt(_this.max)];

	    // 입력 값이 최소값과 최대값 사이에 있는지 확인하고, 그렇지 않으면 값을 조정
	    _this.value = Math.max(parseInt(_this.value), parseInt(inputDepartLeft.value) + 3);

	    // 오른쪽 thumb의 위치를 계산하여 슬라이더의 오른쪽 값을 표시
	    const rightValue = parseInt(_this.value);
	    
	    const rightVal = document.querySelector(".middle-range.depart .div2");
	    rightVal.innerHTML = `${rightValue}:00`;
	    
	    const percent = ((_this.value - min) / (max - min)) * 100;
	    thumbDepartRight.style.right = 100 - percent + "%";
	    departRange.style.right = 100 - percent + "%";
	};

	// 왼쪽 입력 값이 변경될 때와 오른쪽 입력 값이 변경될 때 해당 함수들을 호출하도록
	// 이벤트 리스너를 설정
	inputDepartLeft.addEventListener("input", setDepartLeftValue);
	inputDepartRight.addEventListener("input", setDepartRightValue);

	// 페이지가 로드될 때 초기값을 설정하는 함수
	const setDepartInitialValues = () => {
	    // 초기 왼쪽 값과 오른쪽 값
	    const initialDepartLeftValue = 0;
	    const initialDepartRightValue = 24;
	    // 초기값을 입력 요소에 설정하고, 왼쪽과 오른쪽 thumb의 위치를 조정
	    inputDepartLeft.value = initialDepartLeftValue;
	    inputDepartRight.value = initialDepartRightValue;
	    setDepartLeftValue();
	    setDepartRightValue();
	};

	// 도착
	const inputArrLeft = document.getElementById("arr-input-left");
	const inputArrRight = document.getElementById("arr-input-right");
	const thumbArrLeft = document.querySelector(".slider.arr > .thumb.left.arr");
	const thumbArrRight = document.querySelector(".slider.arr > .thumb.right.arr");
	const arrRange = document.querySelector(".slider.arr > .range");

	const setArrLeftValue = () => {
	    const _this = inputArrLeft;
	    const [min, max] = [parseInt(_this.min), parseInt(_this.max)];

	    _this.value = Math.min(parseInt(_this.value), parseInt(inputArrRight.value) - 3);

	    const leftValue = parseInt(_this.value);
	    
	    const leftVal = document.querySelector(".middle-range.arr .div1");
	    leftVal.innerHTML = `${leftValue}:00`;
	    
	    const percent = ((_this.value - min) / (max - min)) * 100;
	    thumbArrLeft.style.left = percent + "%";
	    arrRange.style.left = percent + "%";
	};

	const setArrRightValue = () => {
	    const _this = inputArrRight;
	    const [min, max] = [parseInt(_this.min), parseInt(_this.max)];

	    _this.value = Math.max(parseInt(_this.value), parseInt(inputArrLeft.value) + 3);

	    const rightValue = parseInt(_this.value);
	    
	    const rightVal = document.querySelector(".middle-range.arr .div2");
	    rightVal.innerHTML = `${rightValue}:00`;
	    
	    const percent = ((_this.value - min) / (max - min)) * 100;
	    thumbArrRight.style.right = 100 - percent + "%";
	    arrRange.style.right = 100 - percent + "%";
	};

	inputArrLeft.addEventListener("input", setArrLeftValue);
	inputArrRight.addEventListener("input", setArrRightValue);

	const setArrInitialValues = () => {
	    const initialArrLeftValue = 0;
	    const initialArrRightValue = 24;
	    inputArrLeft.value = initialArrLeftValue;
	    inputArrRight.value = initialArrRightValue;
	    setArrLeftValue();
	    setArrRightValue();
	};

	
	// 가격 -------------------------------------------------------
	const inputPriceLeft = document.getElementById("price-input-left");
	const inputPriceRight = document.getElementById("price-input-right");
	const thumbPriceLeft = document.querySelector(".slider.price > .thumb.left.price");
	const thumbPriceRight = document.querySelector(".slider.price > .thumb.right.price");
	const priceRange = document.querySelector(".slider.price > .range");

	const setPriceLeftValue = () => {
	    const _this = inputPriceLeft;
	    const [min, max] = [parseInt(_this.min), parseInt(_this.max)];

	    _this.value = Math.min(parseInt(_this.value), parseInt(inputPriceRight.value) - 3);

	    const leftValue = parseInt(_this.value);
	    
	    const leftVal = document.querySelector(".middle-range.price .div1");
	    leftVal.innerHTML = `${leftValue}원 ~`;
	    
	    const percent = ((_this.value - min) / (max - min)) * 100;
	    thumbPriceLeft.style.left = percent + "%";
	    priceRange.style.left = percent + "%";
	};

	const setPriceRightValue = () => {
	    const _this = inputPriceRight;
	    const [min, max] = [parseInt(_this.min), parseInt(_this.max)];

	    _this.value = Math.max(parseInt(_this.value), parseInt(inputPriceLeft.value) + 3);

	    const rightValue = parseInt(_this.value);
	    
	    const rightVal = document.querySelector(".middle-range.price .div2");
	    rightVal.innerHTML = `${rightValue}원`;
	    
	    const percent = ((_this.value - min) / (max - min)) * 100;
	    thumbPriceRight.style.right = 100 - percent + "%";
	    priceRange.style.right = 100 - percent + "%";
	};

	inputPriceLeft.addEventListener("input", setPriceLeftValue);
	inputPriceRight.addEventListener("input", setPriceRightValue);

	const setPriceInitialValues = () => {
	    const initialPriceLeftValue = 0;
	    const initialPriceRightValue = 24;
	    inputPriceLeft.value = initialPriceLeftValue;
	    inputPriceRight.value = initialPriceRightValue;
	    setPriceLeftValue();
	    setPriceRightValue();
	};
	
	// 직항/경유 ----------------------------------

    function btnClickHandler() {

        document.getElementById('direct-btn').addEventListener('click', function () {
        	var blueimg = document.getElementById('blue');
        	blueimg.src = '/Shushoong/src/main/resources/static/images/bluecheck.png';
            // blueimg.src = '@{/images/bluecheck.png}';
            console.log('직항 눌림');
        });

        document.getElementById('layover-btn').addEventListener('click', function () {
            var blueimg = document.getElementById('sky');
            blueimg.src = '/Shushoong/src/main/resources/static/images/skycheck.png';
            // blueimg.src = '@{/images/sky.png}';
            console.log('경유 눌림');
        });
    }
	</script>
</body>
</html>