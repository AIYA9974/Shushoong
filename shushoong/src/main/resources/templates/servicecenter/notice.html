<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<link th:href="@{/css/basic/reset.css}" rel="stylesheet" />
<link th:href="@{/css/basic/core.css}" rel="stylesheet" />
<link th:href="@{/css/basic/layout.css}" rel="stylesheet" />
<link th:href="@{/css/basic/footer.css}" rel="stylesheet" />
<link th:href="@{/css/basic/header.css}" rel="stylesheet" />
<link th:href="@{/css/mypage/customer/mypageCustomerAside.css}"
	rel="stylesheet" />
<link th:href="@{/css/mypage/customer/mypageNotice.css}"
	rel="stylesheet" />
<script type="text/javascript" src="https://code.jquery.com/jquery-3.7.1.js"></script>
<meta charset="UTF-8">
<title>슈슝::공지사항</title>
</head>
<body>
	<div class="wrapper">
		<div class="wrap-header">
			<header>
				<div th:replace="~{common/header :: Header}"></div>
				<div class="hrline">
					<hr>
				</div>
			</header>
		</div>
		<div class="wrap-body">
			<div class="wrap-aside">
				<aside>
					<div th:replace="~{mypage/customer/mypageCustomerAside :: Aside}"></div>
				</aside>
			</div>

			<div class="section-notice">
				<section>
					<h1 class="notice-h1">공지사항</h1>
					<div th:replace="~{servicecenter/notice_section :: noticeList}"></div>
					<div class="wrap-pageNum">
						<th:block th:if="${startPageNum > 1}">
							<button type="button" class="btn-page gopage" th:data-targetpage="${startPageNum - 1}" onclick="goPage(this)">&lt;</button>
						</th:block>
						<div class="wrap-page" th:each="item : ${#numbers.sequence(startPageNum, endPageNum)}">
							<th:block th:if="${currentPageNum == item}">
								<button type="button" class="gopage" th:text="${item}" th:href="@{/support/notice/list/{page}(page=${item})}" disabled></button>
							</th:block>
							<th:block th:unless="${currentPageNum == item}">
								<button type="button" class="btn-page gopage" th:text="${item}" th:data-targetpage="${item}" onclick="goPage(this)"></button>
							</th:block>
						</div>
						<th:block th:if="${endPageNum < totalPageCount}">
							<button type="button" class="btn-page gopage" th:data-targetpage="${endPageNum + 1}" onclick="goPage(this)">&gt;</button>
						</th:block>
					</div>
				</section>
			</div>

		</div>
	</div>
	<div class="wrap-footer">
		<div th:replace="~{common/footer :: Footer}"></div>
	</div>
	
	<script type="text/javascript">
	/* 
	$(loadeadHandler);
	
	function loadeadHandler() {
		goPage();
	}
	 */
	function goPage(thisElement) {
		console.log($(this));
		var currentPageNum = $(thisElement).data('targetpage');
		console.log(currentPageNum);
		$.ajax({
			url:"/shushoong/support/notice/list.ajax",
			method: "get",
			data: { pageNum : currentPageNum},
			error: function(xhr, status, error) {
					console.log('AJAX 실패:', error);
				}
		}).done(function(response) {
			$('#notice-list-container').replaceWith(response);
		})
	}
	</script>
</body>
</html>