<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<link th:href="@{/css/basic/reset.css}" rel="stylesheet" />
<link th:href="@{/css/basic/core.css}" rel="stylesheet" />
<link th:href="@{/css/basic/layout.css}" rel="stylesheet" />
<link th:href="@{/css/basic/footer.css}" rel="stylesheet" />
<link th:href="@{/css/basic/header.css}" rel="stylesheet" />
<link th:href="@{/css/mypage/customer/mypageCustomerAside.css}"
	rel="stylesheet" />
<link th:href="@{/css/mypage/mypageNoticeWrite.css}" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<meta charset="UTF-8">
<title>슈슝::공지사항 수정</title>
</head>
<body>
	<div class="wrapper">
		<div class="wrap-header">
			<header>
				<div th:replace="~{common/header :: Header}"></div>
				<div class="hrline">
					<hr>
				</div>
			</header>
		</div>
		<div class="wrap-body">
			<div class="wrap-aside">
				<aside>
					<div th:replace="~{mypage/customer/mypageCustomerAside :: Aside}"></div>
				</aside>
			</div>

			<div class="wrap-write">
				<h1>공지사항 작성</h1>
				<div hidden="" class="rmfqjsgh" th:text="${noticeDto.noticeId}"></div>
				<hr>
					<div class="write-table">
						<div class="write-title">
							<div class="th title">제목</div>
							<div class="input title">
								<input class="titleVal" type="text" th:value="${noticeDto.noticeTitle}">
							</div>
						</div>
						<div class="write-cat">
							<div class="th cat">카테고리</div>
							<div class="input cat">
								<input type="text" th:value="${#strings.startsWith(noticeDto.noticeId, '1') ? '회원' : (#strings.startsWith(noticeDto.noticeId, '2') ? '사업자' : '')}" readonly>
							<!-- 
								<select class="catVal">
									<option value="1">회원</option>
									<option value="2">사업자</option>
								</select>
								 -->
							</div>
						</div>
						<div class="write-file">
							<div class="th file">첨부파일</div>
							<div class="input file">
								<input type="file" class="fileVal" th:text="${noticeDto.fileId}">
							</div>
						</div>

					</div>
					<div class="input-content">
						<textarea class="content-textarea" rows="15 " cols="" th:text="${noticeDto.noticeContent}"></textarea>
					</div>
					<hr>
					
				<form action="" id="frm-write">
					<input type="hidden" id="noticeTitle" name="noticeTitle">
					<input type="hidden" id="noticeContent" name="noticeContent">
					<input type="hidden" id="noticeCategory" name="noticeCategory">
					<input type="hidden" id="noticeFile" name="noticeFile">
					<input type="hidden" id="noticeId" name="noticeId">
					<input type="hidden" id="principal" name="principal" th:value="${principal}">
				</form>
				<div class="notice-btn">
					<button class="notice-ok">등록</button>
				</div>
			</div>
		</div>
	</div>
	<div class="wrap-footer">
		<div th:replace="~{common/footer :: Footer}"></div>
	</div>

	<script type="text/javascript">
		$(loadeadHandler);
		function loadeadHandler() {
			clickedUpdateOkBtn();
		}
		function clickedUpdateOkBtn(){
			$('.notice-btn').on('click', function(){
				console.log('수정 등록');
				var noticeId = $('.rmfqjsgh').text();
				var noticeTitle = $('.titleVal').val();
				var noticeCategory = $('.catVal').val();
				var noticeFile = $('.fileVal').val();
				var noticeContent = $('.content-textarea').val();
				
				if (noticeTitle.trim() === "" || noticeContent.trim() === "") {
				    alert('제목과 내용을 입력해주세요.');
				    return;
				}
				
				console.log('noticeId : ', noticeId);
				console.log('noticeTitle : ', noticeTitle);
				console.log('noticeCategory : ', noticeCategory);
				console.log('noticeFile : ', noticeFile);
				console.log('noticeContent : ', noticeContent);
				
				$('#noticeId').val(noticeId);
				$('#noticeTitle').val(noticeTitle);
				$('#noticeCategory').val(noticeCategory);
				$('#noticeFile').val(noticeFile);
				$('#noticeContent').val(noticeContent);
				
				$('#frm-write').attr('method', 'POST');
		        $('#frm-write').attr('action', '/shushoong/support/notice/update');
		        $('#frm-write').submit();
			});
		}
	</script>
	<script th:src="@{/js/servicecenter/notice-update.js}" type="text/javascript" ></script>
</body>
</html>