<!DOCTYPE html>
<html 
xmlns:th="http://www.thymeleaf.org">
<head>
	<link th:href="@{/css/basic/reset.css}" rel="stylesheet" />
	<link th:href="@{/css/basic/core.css}" rel="stylesheet" />
	<link th:href="@{/css/basic/layout.css}" rel="stylesheet" />
 	<link th:href="@{/css/basic/footer.css}" rel="stylesheet" />
	<link th:href="@{/css/basic/header.css}" rel="stylesheet" />
	<link th:href="@{/css/member/userJoin.css}" rel="stylesheet" />
	<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<meta charset="UTF-8">
<title>슈슝::개인회원가입</title>
</head>
<body>
	<div class="wrapper">
		<div class="wrap-header">
			<header>
 				<div th:replace="~{common/header :: Header}"></div>
				<div class="hrline">
					<hr>
				</div>
			</header>
		</div>
		<div class="wrap-body">
			<div class="wrap-section">
				<section>
					<div class="userjoin-header">
						개인 회원가입
					</div>
					<div class="userjoin-section">
						<form id="frm-post" th:action="@{/join/customer}" method="post"> 
							<div class="userJoinInfo">
								<div class="idwrite">
									<label for="userId">아이디</label>
									<input type="text" id="userId" name="userId" placeholder="4-15자 영문, 숫자" class="shortinput" autofocus>
									<button type="button" class="btn idCheck">중복확인</button>
								</div>
								<small>Error message</small>
								<div class="namewrite">
									<label for="userName">이름</label>
									<input type="text" id="userName" name="userName" placeholder="이름" class="longinput" >
								</div>
								<small>Error message</small>
								<div class="passwordwrite">
									<label for="userPwd">비밀번호</label>
									<input type="password" id="userPwd" name="userPwd" placeholder="8-20자의 영문, 숫자, 특수문자" class="longinput">
								</div>
								<small>Error message</small>
								<div class="check password">
									<label for="pwdCheck">비밀번호 확인</label>
									<input type="password" id="pwdCheck" name="pwdCheck" placeholder="비밀번호 재입력" class="longinput">
								</div>
								<small>Error message</small>
								<div class="send num">
									<label for="userEmail">이메일</label>
									<input type="text" id="userEmail" name="userEmail" placeholder="이메일 입력" class="shortinput" >
									<button type="button" class="btn emailSend">인증번호 전송</button>
								</div>
								<small>Error message</small>						
								<div class="answer email">
									<label for="code">인증번호</label>
									<input type="text" id="code" name="code" placeholder="인증번호 입력" class="shortinput" >
									<button type="submit" class="btn emailCheck">인증확인</button>
								</div>
								<small>Error message</small>
							</div>
							<div class="agreement-items">
								<div class="marketing-title">서비스 이용약관 동의</div>
								<div class="allchk">
									<input type="checkbox" id="allCheckBox"><span class="on">전체 선택</span>
								</div>
								<hr class="marketingLine" />
								<div class="checkSelection">
									<div class="serviceCheck">
										<input type="checkbox" name="usingAgree" id="usingService" class="usingService"><span class="on">슈슝 이용약관 동의<font color="#ff0000">(필수)</font></span>
									</div>
									<div class="privacyCheck">
										<input type="checkbox" name="usingAgree" id="privacy" class="privacy"><span class="on">개인정보 수집 및 이용 동의<font color="#ff0000">(필수)</font></span>
									</div>
									<div class="marketingsend">
										<input type="checkbox" id="receiveMarketing" class="receiveMarketing" onclick="checkClicked()"><span class="on">슈슝 마케팅 수신 동의(선택)</span>
									</div>
									<div class="choice">
										<div class="smsMarketing">
											<input type="checkbox" name="usingAgree" id="snsagree" value="1" onclick="checkClicked()"><span class="on">SMS 수신</span>
										</div>
										<div class="emailMarketing">
											<input type="checkbox" name="usingAgree" id="emailagree" value="1" onclick="checkClicked()"><span class="on">이메일 수신</span>
										</div>
									</div>
									<div class="text">마케팅 수신 시 다양한 혜택을 받아보실 수 있습니다.</div>
								</div>
							</div>
							<div class="userJoinBtn">
								<button type="submit" class="btn userJoin">회원가입</button>
							</div>
						</form>
					</div>
				</section>
			</div>
		</div>
	</div>
	<div class="wrap-footer">
  		<div th:replace="~{common/footer :: Footer}"></div> 
	</div>
	
	<script>
		$(loadedHanlder);
		function loadedHanlder() {
			$(".btn.emailSend").on("click", emailSendHandler);
			$(".btn.emailCheck").on("click", emailCheckHandler);
		}
		
		// 이메일 전송 이벤트
		function emailSendHandler() {	
			var userEmail = $("#userEmail").val();
			console.log(userEmail);
			
			$.ajax({
				type: "post",
				url: "/shushoong/v2/verify-email",
				contentType : 'application/json;',
				data: JSON.stringify({
					'userEmail' : userEmail
				})
			})
		}
		
		// 이메일 체크 이벤트
		function emailCheckHandler() {	
			var code = $("#code").val();
			console.log(userEmail);
			
			$.ajax({
				type: "post",
				url: "/shushoong/verification-code",
				contentType : 'application/json;',
				data: JSON.stringify({
					'code' : code
				})
			})
		}
	</script>
</body>
</html>